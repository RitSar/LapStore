{"ast":null,"code":"import _toConsumableArray from\"D:\\\\Files\\\\e-commerce\\\\e-commerce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:\\\\Files\\\\e-commerce\\\\e-commerce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\Files\\\\e-commerce\\\\e-commerce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Files\\\\e-commerce\\\\e-commerce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Files\\\\e-commerce\\\\e-commerce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Files\\\\e-commerce\\\\e-commerce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{storeProducts,detailProduct}from'./data';var ProductContext=React.createContext();var ProductProvider=/*#__PURE__*/function(_Component){_inherits(ProductProvider,_Component);var _super=_createSuper(ProductProvider);function ProductProvider(){var _this;_classCallCheck(this,ProductProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={products:[],detailProduct:detailProduct,cart:[],modalOpen:false,modalProduct:detailProduct,cartSubTotal:0,cartTax:0,cartTotal:0};_this.setProducts=function(){var tempProducts=[];storeProducts.forEach(function(item){var singleItem=_objectSpread({},item);tempProducts=[].concat(_toConsumableArray(tempProducts),[singleItem]);});_this.setState(function(){return{products:tempProducts};});};_this.getItem=function(id){var product=_this.state.products.find(function(item){return item.id===id;});return product;};_this.handleDetail=function(id){// console.log(\"Hello from detail.\");\nvar product=_this.getItem(id);_this.setState(function(){return{detailProduct:product};});};_this.addToCart=function(id){var tempProducts=_toConsumableArray(_this.state.products);var index=tempProducts.indexOf(_this.getItem(id));var product=tempProducts[index];product.inCart=true;product.count=1;var price=product.price;product.total=price;_this.setState(function(){return{products:tempProducts,cart:[].concat(_toConsumableArray(_this.state.cart),[product])};},function(){_this.addTotals();});};_this.openModal=function(id){var product=_this.getItem(id);_this.setState(function(){return{modalProduct:product,modalOpen:true};});};_this.closeModal=function(){_this.setState(function(){return{modalOpen:false};});};_this.increment=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectedProduct=tempCart.find(function(item){return item.id===id;});var index=tempCart.indexOf(selectedProduct);var product=tempCart[index];++product.count;product.total=product.price*product.count;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},function(){_this.addTotals();});};_this.decrement=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectedProduct=tempCart.find(function(item){return item.id===id;});var index=tempCart.indexOf(selectedProduct);var product=tempCart[index];--product.count;if(product.count===0){_this.removeItem(id);}else{product.total=product.price*product.count;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},function(){_this.addTotals();});}};_this.removeItem=function(id){var tempProducts=_toConsumableArray(_this.state.products);var tempCart=_toConsumableArray(_this.state.cart);tempCart=tempCart.filter(function(item){return item.id!==id;});var index=tempProducts.indexOf(_this.getItem(id));var removedProduct=tempProducts[index];removedProduct.inCart=false;removedProduct.count=0;removedProduct.total=false;_this.setState(function(){return{cart:_toConsumableArray(tempCart),products:_toConsumableArray(tempProducts)};},function(){_this.addTotals();});};_this.clearCart=function(){_this.setState(function(){return{cart:[]};},function(){_this.setProducts();_this.addTotals();});};_this.addTotals=function(){var subTotal=0;_this.state.cart.map(function(item){return subTotal+=item.total;});var tax=parseFloat((subTotal*0.17).toFixed(2));var total=parseFloat((subTotal+tax).toFixed(2));_this.setState(function(){return{cartSubTotal:subTotal,cartTax:tax,cartTotal:total};});};return _this;}_createClass(ProductProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.setProducts();}},{key:\"render\",// tester = () => {\n//     console.log('State products:', this.state.products[0].inCart);\n//     console.log('Data products:', storeProducts[0].inCart);\n//     const tempProducts = [...this.state.products];\n//     tempProducts[0].inCart = true;\n//     this.setState(()=>{\n//         return {products: tempProducts}\n//     },()=>{\n//         console.log('State products:', this.state.products[0].inCart);\n//         console.log('Data products:', storeProducts[0].inCart);\n//     })\n// };\nvalue:function render(){return/*#__PURE__*/React.createElement(ProductContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{handleDetail:this.handleDetail,addToCart:this.addToCart,openModal:this.openModal,closeModal:this.closeModal,increment:this.increment,decrement:this.decrement,removeItem:this.removeItem,clearCart:this.clearCart})},this.props.children);}}]);return ProductProvider;}(Component);var ProductConsumer=ProductContext.Consumer;export{ProductProvider,ProductConsumer};","map":{"version":3,"sources":["D:/Files/e-commerce/e-commerce/src/context.js"],"names":["React","Component","storeProducts","detailProduct","ProductContext","createContext","ProductProvider","state","products","cart","modalOpen","modalProduct","cartSubTotal","cartTax","cartTotal","setProducts","tempProducts","forEach","item","singleItem","setState","getItem","id","product","find","handleDetail","addToCart","index","indexOf","inCart","count","price","total","addTotals","openModal","closeModal","increment","tempCart","selectedProduct","decrement","removeItem","filter","removedProduct","clearCart","subTotal","map","tax","parseFloat","toFixed","props","children","ProductConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {storeProducts, detailProduct} from './data';\r\n\r\nconst ProductContext = React.createContext();\r\n\r\n\r\nclass ProductProvider extends Component {\r\n    state={\r\n        products: [],\r\n        detailProduct: detailProduct,\r\n        cart: [],\r\n        modalOpen: false,\r\n        modalProduct: detailProduct,\r\n        cartSubTotal: 0,\r\n        cartTax: 0,\r\n        cartTotal: 0,\r\n    };\r\n    componentDidMount(){\r\n        this.setProducts();\r\n    }\r\n    setProducts = () => {\r\n        let tempProducts = [];\r\n        storeProducts.forEach(item =>{\r\n            const singleItem = {...item};\r\n            tempProducts = [...tempProducts, singleItem];\r\n        });\r\n        this.setState(()=>{\r\n            return {products: tempProducts};\r\n        });\r\n    }\r\n\r\n    getItem = (id) => {\r\n        const product = this.state.products.find(item => item.id === id);\r\n        return product;\r\n    }\r\n\r\n    handleDetail = (id) => {\r\n        // console.log(\"Hello from detail.\");\r\n        const product = this.getItem(id);\r\n        this.setState(()=>{\r\n            return {detailProduct: product}\r\n        })\r\n    };\r\n\r\n    addToCart = (id) => {\r\n        let tempProducts = [...this.state.products];\r\n        const index = tempProducts.indexOf(this.getItem(id));\r\n        const product = tempProducts[index];\r\n        product.inCart = true;\r\n        product.count = 1;\r\n        const price = product.price;\r\n        product.total = price;\r\n\r\n        this.setState(()=>{\r\n            return { products: tempProducts, cart:[...this.state.cart,product] };\r\n        },()=>{this.addTotals();});\r\n    };\r\n\r\n    openModal = id => {\r\n        const product = this.getItem(id);\r\n        this.setState(()=>{\r\n            return {modalProduct: product,modalOpen:true};\r\n        });\r\n    };\r\n    closeModal = () => {\r\n        this.setState(()=>{\r\n            return {modalOpen: false}\r\n        });\r\n    };\r\n    increment = (id) => {\r\n        let tempCart = [...this.state.cart];\r\n        const selectedProduct = tempCart.find(item=>item.id === id);\r\n\r\n        const index = tempCart.indexOf(selectedProduct);\r\n        const product = tempCart[index];\r\n\r\n        ++product.count;\r\n        product.total = product.price * product.count; \r\n\r\n        this.setState(()=>{return{cart:[...tempCart]}},()=>{this.addTotals()})\r\n    };\r\n    decrement = (id) => {\r\n        let tempCart = [...this.state.cart];\r\n        const selectedProduct = tempCart.find(item=>item.id === id);\r\n\r\n        const index = tempCart.indexOf(selectedProduct);\r\n        const product = tempCart[index];\r\n\r\n        --product.count;\r\n        if(product.count === 0){\r\n            this.removeItem(id);\r\n        }else{\r\n            product.total = product.price * product.count;\r\n            this.setState(()=>{return{cart:[...tempCart]}},()=>{this.addTotals()})\r\n        }\r\n    };\r\n    removeItem = (id) => {\r\n        let tempProducts = [...this.state.products];\r\n        let tempCart = [...this.state.cart];\r\n        tempCart = tempCart.filter(item => item.id !== id);\r\n\r\n        const index = tempProducts.indexOf(this.getItem(id));\r\n        let removedProduct = tempProducts[index];\r\n        removedProduct.inCart = false;\r\n        removedProduct.count = 0;\r\n        removedProduct.total = false;\r\n\r\n        this.setState(()=>{\r\n            return{\r\n                cart: [...tempCart],\r\n                products: [...tempProducts],\r\n            }\r\n        },()=>{\r\n            this.addTotals();\r\n        }\r\n        );\r\n    };\r\n    clearCart = () => {\r\n        this.setState(\r\n            () => { return {cart:[]}; },\r\n            () => {\r\n                this.setProducts();\r\n                this.addTotals();\r\n            }\r\n        )\r\n    };\r\n    addTotals = () =>{\r\n        let subTotal = 0;\r\n        this.state.cart.map(item => (subTotal += item.total));\r\n        const tax = parseFloat((subTotal*0.17).toFixed(2));\r\n        const total = parseFloat((subTotal + tax).toFixed(2));\r\n        this.setState(()=>{\r\n            return {\r\n                cartSubTotal: subTotal,\r\n                cartTax: tax,\r\n                cartTotal: total\r\n            }\r\n        })\r\n    }\r\n    // tester = () => {\r\n    //     console.log('State products:', this.state.products[0].inCart);\r\n    //     console.log('Data products:', storeProducts[0].inCart);\r\n\r\n    //     const tempProducts = [...this.state.products];\r\n    //     tempProducts[0].inCart = true;\r\n    //     this.setState(()=>{\r\n    //         return {products: tempProducts}\r\n    //     },()=>{\r\n    //         console.log('State products:', this.state.products[0].inCart);\r\n    //         console.log('Data products:', storeProducts[0].inCart);\r\n    //     })\r\n    // };\r\n    render() {\r\n        return (\r\n            <ProductContext.Provider value={{\r\n                ...this.state,\r\n                handleDetail: this.handleDetail,\r\n                addToCart: this.addToCart,\r\n                openModal: this.openModal,\r\n                closeModal: this.closeModal,\r\n                increment: this.increment,\r\n                decrement: this.decrement,\r\n                removeItem: this.removeItem,\r\n                clearCart: this.clearCart\r\n            }}>\r\n                {/* <button onClick={this.tester}>tester</button> */}\r\n                {this.props.children}\r\n            </ProductContext.Provider>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst ProductConsumer = ProductContext.Consumer;\r\n\r\nexport {ProductProvider, ProductConsumer};"]},"metadata":{},"sourceType":"module"}